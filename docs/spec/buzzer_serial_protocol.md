# 早押し機 シリアル通信プロトコル仕様

---

## 接続設定

| 項目           | 値       |
| -------------- | -------- |
| ボーレート     | 9600 bps |
| データビット   | 8        |
| ストップビット | 1        |
| パリティ       | なし     |

---

## メッセージフォーマット

```
{数値}\r\n
```

- 1行1シグナル
- 数値は10進数の文字列
- 行末は `\r\n`（CR+LF）

このフォーマットに従わないシグナルは処理しない。

---

## シグナル一覧

以下に記載のないシグナルは処理しない。

### ランプシグナル（ボタン押下通知）

| 数値 | 意味                 | buttonIndex（0-based） |
| ---- | -------------------- | ---------------------- |
| 1    | ボタン1番が押された  | 0                      |
| 2    | ボタン2番が押された  | 1                      |
| ...  | ...                  | ...                    |
| 24   | ボタン24番が押された | 23                     |

解答権を獲得したボタンを検出し、ランプが点灯したタイミングで送信される。

### リリースシグナル（判定・リセット通知）

| 数値 | 意味       |
| ---- | ---------- |
| 51   | 正解判定   |
| 52   | 不正解判定 |
| 99   | リセット   |

正誤判定者がコントローラーのボタンを操作したタイミングで送信される。

---

## 通信の例

### 正解のケース

```
5\r\n     ← ボタン5番が解答権獲得（ランプ点灯）
51\r\n    ← 正解判定
99\r\n    ← リセット（次の問題へ）
```

### 不正解のケース

```
3\r\n     ← ボタン3番が解答権獲得（ランプ点灯）
52\r\n    ← 不正解判定
99\r\n    ← リセット（次の問題へ）
```
